<div>
    <div ng-hide="ctrl.mode == 'add'">
      <label ng-bind="comment['commentAuthor']" class="col-sm-2 control-label"></label>
    </div>
    <div ng-show="ctrl.mode == 'add'" class="col-sm-2"></div>

    <div ng-hide="ctrl.mode == 'add'"
      class="col-sm-10" style="padding-top: 7px;">
      <span ng-bind="comment['comment']"></span><br/>
      Entered <span ng-bind-html="comment['commentAuthored'] | amUtc | amLocal | amCalendar:referenceTime:formats"></span>
      <span ng-show="comment['commentLastModfiedBy'].length"><br/>
        Last edited by <span ng-bind="comment['commentLastModifiedBy']"></span> 
        on <span ng-bind="comment['commentLastModified'] | amUtc | amLocal | amCalendar:referenceTime:formats"></span>
      </span>
      <button type="button" 
        ng-show="ctrl.mode == 'edit'"
        ng-click="ctrl.showDetails('comment', [{name: 'commentID', id: comment['commentID']}])"> Edit </button>
      <button type="button" 
        ng-show="ctrl.mode == 'editDetail'"
        ng-click="ctrl.hideDetails('comment', [{name: 'commentID', id: comment['commentID']}])"> Cancel </button>
    </div>

    <div class="col-sm-offset-2 col-sm-10" style="background-color: #eeeeee; border-color: #e7e7e7; padding: 0, 15px;">
      <h5 ng-hide="ctrl.mode == 'add'">Edit this comment:</h5>

    <!--textarea ng-model="comment.comment" ng-bind="comment.comment" 
      class="form-control"></textarea-->
    </div>

    <div style="background-color: #eee; border-color: #e7e7e7;"
      class="col-sm-offset-2 col-sm-10">
      <formly-form model="comment"
        fields="ctrl.fields" 
        options="ctrl.options">
        <div class="padding-bottom: 15px;">
          <div ng-hide="ctrl.mode == 'add' || ctrl.mode == 'editDetail'" class="col-sm-4">
            Entered <span ng-bind="comment['commentAuthored'] | amUtc | amLocal | amCalendar:referenceTime:formats"></span>
            <span ng-show="comment['commentLastModifiedBy'].length"><br/>
              Last edited by <span ng-bind="comment['commentLastModifiedBy']"></span>
              on <span ng-bind="comment['commentLastModified'] | amUtc | amLocal | amCalendar:referenceTime:formats"></span></span><br/>
          </div class="col-sm-4">
          <button type="button" ng-click="ctrl.save('comment', {model: comment, field_name: 'comments'})"> Save </button>
          <button type="button" ng-click="ctrl.hideDetails('comment', [{name: 'commentID', id: comment['commentID']}])"> Cancel </button>
        </div>
      </formly-form>
    </div>


    <div ng-show="ctrl.mode == 'add'" class="col-sm-12">
      <h4> Earlier Comments </h4>
    </div>
</div>